# 与`ledger`集成（Integrate with the Internet Computer ledger）

本指南介绍了用于`ICP`代币分发、交易管理、基于代币的质押和服务支付的`ICP`协议组件。该文档概述了支持`ICP`协议代币管理的设计、实施、安全保证、系统要求和应用程序编程接口（API）。

与`ledger`集成旨在为需要了解`ICP`协议代币的术语和整体交易管理流程的组织和开发者提供高级概述。

当你阅读本指南时，请注意后续文档中可能会提供有关特定组件或接口的其它详细信息，以补充本文档中提供的概述。此外，本概述重点介绍如何使用`Rosetta`接口与`IC`集成。其它集成选项也是可能的。未来的文档中可能会提供有关其它集成选项和过程的信息。

## 基本术语（Basic terminology）

-----

`IC`是一个区块链系统，由多个子网组成，用于运行去中心化应用。当你编写在`IC`上运行的去中心化应用时，你以称为罐头的概念计算单元的形式部署你的程序。罐头是一种新型的智能合约，它由程序的源代码及其运行状态组成，并在保证安全性和活性的子网上复制。

最终用户或其它罐头可以向罐头发送消息以执行特定操作。消息可以是在不修改罐头状态的情况下检索信息的查询调用（`query`），也可以是修改罐头状态的更新调用。执行更新状态的顺序是在运行罐头的子网中的所有节点之间使用共识决定的。

## `ledger`概述

-----

`ICP`协议使用称为`ledger`的罐头来专门管理`ICP`代币。在`IC`的一个特殊子网（即`NNS`子网）上，有一个单一的`ledger`罐头与其它罐头一起运行。`ledger`罐头是一个保存账本和交易的智能合约。这些交易要么为账户铸造`ICP`代币，要么将`ICP`代币从一个账户转移到另一个账户，要么烧毁`ICP`代币。`ledger`罐头维护从其创世状态（初始状态）开始的所有交易的可追溯历史记录。

### 账户（Accounts）

账户属于并由必须是`IC`委托人的账户所有者控制。两个或多个`IC`负责人不能拥有任何账户（没有“联名账户”）。

一个账户所有者可以控制多个账户。在这种情况下，每个账户对应一对（`account_owner`，`sub_account`）。子账户是一个可选的位串，有助于区分同一个所有者的不同子账户。

账本上的账户由其地址标识，该地址来源于主体`id`和子账户标识符。

在这种情况下，你可以将主体标识符视为粗略等同于比特币或以太坊的用户公钥的`hash`。你使用相应的签名对消息进行签名，从而对`ledger`罐头进行身份验证并在托管人的账户上进行操作。罐头也可以在`ledger`中拥有账户，在这种情况下，地址来自该罐头的主体（`principal`）。

`ledger`罐头使用`IC`内部的管理操作进行初始化。作为初始化过程的一部分，罐头是使用一组账户和关联的`ICP`代币余额创建的。

### 交易类型（Transaction types）

